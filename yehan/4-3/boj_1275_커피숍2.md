# BOJ 1275ë²ˆ ì»¤í”¼ìˆ2

[BOJ 1275ë²ˆ ì»¤í”¼ìˆ2](https://www.acmicpc.net/problem/1275)

### ğŸ¤” ë¬¸ì œ ì´í•´í•˜ê¸°

- ìˆ˜ì˜ ë³€ê²½ì´ ìì£¼ ì¼ì–´ë‚˜ëŠ” ìˆ˜ì—´
- êµ¬ê°„ í•© êµ¬í•˜ê¸°

### â­ ì•Œê³ ë¦¬ì¦˜

- Segment Tree

### ğŸ’» ë¬¸ì œë¥¼ í•´ê²°í•œ ì½”ë“œ

```java
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.StringTokenizer;

public class Main_1275_ì»¤í”¼ìˆ2 {

	static int n;
	static long[] nums, trees;

	public static void main(String[] args) throws Exception {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));
		StringBuilder sb = new StringBuilder();

		// ì…ë ¥
		StringTokenizer st = new StringTokenizer(br.readLine());
		n = Integer.parseInt(st.nextToken());
		int q = Integer.parseInt(st.nextToken());

		nums = new long[n + 1];
		st = new StringTokenizer(br.readLine());
		for (int i = 1; i <= n; ++i) {
			nums[i] = Long.parseLong(st.nextToken());
		}

		// ë¡œì§
		segmentTree();

		while (q-- > 0) {
			st = new StringTokenizer(br.readLine());
			int x = Integer.parseInt(st.nextToken());
			int y = Integer.parseInt(st.nextToken());
			int a = Integer.parseInt(st.nextToken());
			int b = Integer.parseInt(st.nextToken());

			sb.append(calcSum(Math.min(x, y), Math.max(x, y))).append("\n");
			change(a, b);
		}

		bw.write(sb.toString());
		bw.flush();
		bw.close();
		br.close();
	}

	// RSB êµ¬í•˜ê¸°
	private static int RSB(int num) {
		return num & (-num);
	}

	// ì´ˆê¸° segment tree êµ¬ì„±
	private static void segmentTree() {
		trees = nums.clone();

		for (int i = 1; i <= n; ++i) {
			int parent = i + RSB(i);
			if (parent <= n) trees[parent] += trees[i];
		}
	}

	// 1ë¶€í„° idxê¹Œì§€ì˜ í•© êµ¬í•˜ê¸°
	private static long getSum(int idx) {
		long res = 0;
		while (idx > 0) {
			res += trees[idx];
			idx -= RSB(idx);
		}
		return res;
	}

	// idx1ë¶€í„° idx2ê¹Œì§€ì˜ í•© êµ¬í•˜ê¸°
	private static long calcSum(int idx1, int idx2) {
		return getSum(idx2) - getSum(idx1 - 1);
	}

	// idxì˜ ê°’ì„ numìœ¼ë¡œ ë³€ê²½í•˜ê¸°
	private static void change(int idx, int num) {
		long diff = num - nums[idx];
		nums[idx] = num;
		while (idx <= n) {
			trees[idx] += diff;
			idx += RSB(idx);
		}
	}
}

```
